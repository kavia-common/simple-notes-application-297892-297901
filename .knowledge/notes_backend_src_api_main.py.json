{"is_source_file": true, "format": "Python", "description": "This is a FastAPI application source file implementing a Notes CRUD API with SQLAlchemy and PostgreSQL. It defines data models, API endpoints, database setup, and middleware configurations.", "external_files": ["fastapi", "pydantic", "sqlalchemy", "os", "datetime"], "external_methods": ["FastAPI()", "HTTPException()", "Depends()", "CORSMiddleware()", "create_engine()", "sessionmaker()", "func.now()", "Base.metadata.create_all()", "datetime.now()", "os.getenv()"], "published": ["app"], "classes": [{"name": "Note", "description": "SQLAlchemy model representing the notes table with fields id, title, content, created_at, updated_at."}, {"name": "NoteBase", "description": "Pydantic schema for note creation and updates, containing title and content fields."}, {"name": "NoteCreate", "description": "Schema for creating a new note, inherits from NoteBase."}, {"name": "NoteUpdate", "description": "Schema for updating an existing note, with optional title and content."}, {"name": "NoteRead", "description": "Schema for reading note data, including id, created_at, updated_at, along with inherited fields."}], "methods": [{"name": "_get_engine()", "description": "Lazy initializer for the SQLAlchemy engine, creates engine if not already created.", "scope": "", "scopeKind": ""}, {"name": "_get_session_factory()", "description": "Lazy initializer for session factory, creates it if not already instantiated.", "scope": "", "scopeKind": ""}, {"name": "_ensure_tables()", "description": "Creates database tables if they do not already exist.", "scope": "", "scopeKind": ""}, {"name": "get_db()", "description": "Dependency that provides a database session, ensuring proper cleanup.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Basic health check endpoint returning a 'Healthy' message.", "scope": "", "scopeKind": ""}, {"name": "list_notes(db: Session = Depends(get_db))", "description": "Fetches and returns all notes ordered by latest update.", "scope": "", "scopeKind": ""}, {"name": "get_note(note_id: int, db: Session = Depends(get_db))", "description": "Retrieves a specific note by its ID.", "scope": "", "scopeKind": ""}, {"name": "create_note(payload: NoteCreate, db: Session = Depends(get_db))", "description": "Creates a new note entry.", "scope": "", "scopeKind": ""}, {"name": "update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))", "description": "Updates an existing note identified by its ID.", "scope": "", "scopeKind": ""}, {"name": "delete_note(note_id: int, db: Session = Depends(get_db))", "description": "Deletes a note identified by its ID.", "scope": "", "scopeKind": ""}], "calls": ["create_engine(DATABASE_URL, echo=False, future=True)", "sessionmaker(bind=_get_engine(), autoflush=False, autocommit=False, future=True)", "Base.metadata.create_all(bind=engine)", "db.query(Note).order_by(Note.updated_at.desc()).all()", "db.query(Note).filter(Note.id == note_id).first()", "db.add(note)", "db.commit()", "db.refresh(note)", "db.delete(note)"], "search-terms": ["FastAPI notes API", "PostgreSQL ORM", "SQLAlchemy models", "CRUD endpoints", "Database lazy init", "Notes API with CORS", "Pydantic schemas"], "state": 2, "file_id": 3, "knowledge_revision": 15, "git_revision": "c282164a4afabc1f8e92e4f4a266b5ecbd5aced1", "revision_history": [{"9": "cc71d911c0de5ffc2a76fbea6b90c3760ca64bbc"}, {"10": "03950f9b6111b3b981323379a2015be148cf3b8d"}, {"15": "c282164a4afabc1f8e92e4f4a266b5ecbd5aced1"}], "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "NoteRead", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^DATABASE_URL = os.getenv($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^class Note(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteBase", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^class NoteBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteRead", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^class NoteRead(NoteBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_SessionLocal", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^_SessionLocal = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"notes\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "_engine", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^_engine = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_ensure_tables", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def _ensure_tables():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_engine", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def _get_engine():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_session_factory", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def _get_session_factory():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    content = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    content: Optional[str] = Field(None, description=\"Updated content of the note\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Content of the note\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: NoteCreate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    created_at = Column(DateTime(timezone=True), server_default=func.now(), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    created_at: datetime = Field(..., description=\"Creation timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "NoteRead", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def delete_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "from_attributes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^        from_attributes = True$/", "language": "Python", "kind": "variable", "scope": "NoteRead.Config", "scopeKind": "class"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def get_note(note_id: int, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the note\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "NoteRead", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def list_notes(db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(db: Session = Depends(get_db))"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    title = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    title: Optional[str] = Field(None, description=\"Updated title of the note\", min_length=1, ma/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the note\", min_length=1, max_length=255)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteBase", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now(),/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-297892-297901/notes_backend/src/api/main.py", "pattern": "/^    updated_at: datetime = Field(..., description=\"Last update timestamp\")$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "NoteRead", "scopeKind": "class"}], "hash": "24e8f3685b79fd3e1cd3745ba205591f", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_SessionLocal = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"notes\"", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "_engine = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "content = Column(Text, nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] content", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime(timezone=True), server_default=func.now(), nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime created_at", "scope": "NoteRead", "scopeKind": "class", "description": "unavailable"}, {"name": "from_attributes = True", "scope": "NoteRead.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "NoteRead", "scopeKind": "class", "description": "unavailable"}, {"name": "title = Column(String(255), nullable=False)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "NoteBase", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at = Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now(),/", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "datetime updated_at", "scope": "NoteRead", "scopeKind": "class", "description": "unavailable"}]}